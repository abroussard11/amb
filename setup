

####
## The top-level setup file
###

#if (! -d .setup) then
#  scripts/mk_setup

setenv PROJECT_PATH "$PWD"

## Build target
setenv COMP_TYPE `uname --kernel-name`_`uname --machine`
setenv MAKE_TYPE `uname --kernel-name`
setenv MAKE_JOBS `nproc`

setenv LD_LIBRARY_PATH "$PROJECT_PATH/$COMP_TYPE/lib"

setenv MAKEFLAGS "--no-builtin-variables --no-print-directory --warn-undefined-variables --output-sync --include-dir=$PROJECT_PATH/xanrMake"

setenv COLORFUL_MAKE true

set amb_languages = ( cxx \
                      dot \
                      python )

foreach lang ($amb_languages)
   source $lang/setup
end

set addpaths = ( \
   $PROJECT_PATH/$COMP_TYPE/bin \
   $PROJECT_PATH/scripts \
   )

foreach p ($addpaths)
   if ("$path" =~ {*$p*}) then
      #do nothing
      echo "Already there:" $p
   else
      echo "Adding:" $p
      set path=($path $p)
   endif
end
